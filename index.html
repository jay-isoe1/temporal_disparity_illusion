<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Shadow Illusion â€” p5.js</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./style.css" />
  <style>
    /* Floating glass-like explanation box, top-left */
    details.explanation-box {
      position: absolute;
      top: 16px;
      left: 16px;
      background: rgba(255, 255, 255, 0.7); /* translucent white */
      color: #111;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 12px 16px;
      max-width: 320px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      backdrop-filter: blur(10px) saturate(150%);
      -webkit-backdrop-filter: blur(10px) saturate(150%);
      font-size: 0.9rem;
      transition: all 0.25s ease;
    }
    details.explanation-box[open] {
      max-height: 90vh; /* keeps from overflowing the viewport */
      overflow-y: auto;
    }
    details.explanation-box summary {
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 0.5rem;
      list-style: none;
    }
    details.explanation-box summary::-webkit-details-marker {
      display: none; /* hide default triangle */
    }
    details.explanation-box summary::before {
      content: "ðŸ’¡ ";
      font-size: 1.1rem;
    }
  </style>
</head>
<body>
  <main id="app">

    <!-- Floating, collapsible explanation box -->
    <details class="explanation-box" open>
      <summary>Explanation</summary>

      <h3>Layout & Math</h3>

      <p><strong>1) Linear / Golden / Double</strong></p>
      <p>\[
        \theta_i = i\,\Delta\theta,\quad
        r_i = r_{\text{start}} + i\,\Delta r,\quad
        x_i = x_c + r_i\cos\theta_i,\quad
        y_i = y_c + r_i\sin\theta_i.
      \]</p>

      <p><strong>2) Wave (column-based sine)</strong></p>
      <p>\[
        k=\frac{2\pi\cdot 4}{\text{cols}},\quad
        \phi_{\text{col}} = k\cdot \text{col},\quad
        y_{\text{offset}}=A\sin(\phi_{\text{col}})
      \]</p>

      <p><strong>3) Lightness Mapping</strong></p>
      <p>\[
        t=\frac{\text{col}}{\text{cols}-1},\quad
        L=
        \begin{cases}
          30 & t<0.25\\
          50 & 0.25\le t<0.50\\
          70 & 0.50\le t<0.75\\
          90 & 0.75\le t\le 1
        \end{cases}
      \]</p>

      <p><strong>4) Shadow Phase & Fade</strong></p>
      <p>\[
        \text{shadowShiftPhase} \leftarrow
        \mathrm{lerp}(\text{shadowShiftPhase},\ \pm 1,\ \text{shadowShiftSpeed})
      \]</p>
      <p><code>fadeDirection *= -1</code> flips shadow polarity at background limits.</p>
    </details>

    <!-- p5.js canvas container -->
    <div id="canvas-wrap"></div>

  </main>

  <!-- p5.js -->
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.3/lib/p5.min.js"></script>
  <!-- dat.GUI -->
  <script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.9/build/dat.gui.min.js"></script>
  <!-- main sketch -->
  <script src="sketch.js"></script>

  <!-- MathJax -->
  <script>
    window.MathJax = { tex: { inlineMath: [['\\(','\\)'], ['$', '$']] }, svg: { fontCache: 'global' } };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</body>
</html>
