<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Shadow Illusion â€” p5.js</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <main id="app">

    <!-- Upper-left explanation: when collapsed, only "Explanation" remains -->
    <details open>
      <summary>Explanation</summary>

      <h2>Layout & Math Overview</h2>

      <h3>1) Linear / Golden / Double</h3>
      <p>\[
        \theta_i = i\,\Delta\theta,\quad
        r_i = r_{\text{start}} + i\,\Delta r,\quad
        x_i = x_c + r_i\cos\theta_i,\quad
        y_i = y_c + r_i\sin\theta_i.
      \]</p>
      <p>\[
        \theta_i^{(\mathrm{golden})} = i \cdot 137.5^\circ,\quad
        r_i^{(\mathrm{golden})} = r_{\text{start}} + 1.5\,i
      \]</p>
      <p>\[
        \mathrm{dir}_i=\begin{cases}+1&i\ \text{even}\\-1&i\ \text{odd}\end{cases},\quad
        \theta_i^{(\mathrm{double})}=i\,\Delta\theta\,\mathrm{dir}_i
      \]</p>

      <h3>2) Wave (column-based sine)</h3>
      <p>\[
        k=\frac{2\pi\cdot 4}{\text{cols}},\quad
        \phi_{\text{col}} = k\cdot \text{col},\quad
        y_{\text{offset}}=A\sin(\phi_{\text{col}})
      \]</p>
      <p>\[
        x_i=x_c+\bigl(\text{col}\cdot dx-\tfrac{(\text{cols}-1)dx}{2}\bigr),\quad
        y_i=y_c+\bigl(\text{row}\cdot dy-\tfrac{(\text{rows}-1)dy}{2}\bigr)+y_{\text{offset}}
      \]</p>

      <h3>3) Lightness Mapping</h3>
      <p>\[
        t=\frac{\text{col}}{\text{cols}-1},\quad
        L=
        \begin{cases}
          30 & t<0.25\\
          50 & 0.25\le t<0.50\\
          70 & 0.50\le t<0.75\\
          90 & 0.75\le t\le 1
        \end{cases}
      \]</p>

      <h3>4) Shadow Phase & Fade</h3>
      <p>\[
        \text{shadowShiftPhase} \leftarrow
        \mathrm{lerp}(\text{shadowShiftPhase},\ \pm 1,\ \text{shadowShiftSpeed})
      \]</p>
      <p>Shadow polarity flips when background fade hits a bound: <code>fadeDirection *= -1</code></p>
    </details>

    <!-- p5 canvas will attach here -->
    <div id="canvas-wrap"></div>

  </main>

  <!-- p5.js -->
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.3/lib/p5.min.js"></script>
  <!-- dat.GUI -->
  <script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.9/build/dat.gui.min.js"></script>
  <!-- your sketch -->
  <script src="sketch.js"></script>

  <!-- MathJax (for equations) -->
  <script>
    window.MathJax = { tex: { inlineMath: [['\\(','\\)'], ['$', '$']] }, svg: { fontCache: 'global' } };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</body>
</html>
